<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Journaling Widget</title>

<style>
/* ⭐ Keep left-aligned under Notion heading */
html, body {
  margin: 0 !important;
  padding: 0 !important;
  text-align: left !important;
  display: block !important;
}

/* COLOR SYSTEM */
:root {
  --bg-gradient: linear-gradient(180deg, #F5EDE9, #F2E8E3);
  --surface: #FBF8F6;
  --text: #3A302C;
  --accent: #B99372;
  --accent-soft: #D7C1B3;
  --border: #E6D7D0;
  --chip-bg: #F5EDE9;
}

body {
  font-family: "Inter", sans-serif;
  background: transparent;
  color: var(--text);
}

/* CARD (same as perfect version 1) */
.card {
  width: 100%;
  max-width: 1150px;
  background: var(--bg-gradient);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 26px 32px 34px 32px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.08);
  box-sizing: border-box;
  margin-left: 0 !important;
}

/* HEADER */
.label { font-size: 11px; letter-spacing: 2px; opacity: 0.65; font-weight: 600; }

.header-top {
  margin-top: 4px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.title { font-size: 22px; font-weight: 700; }

.chip {
  background: var(--chip-bg);
  padding: 7px 14px;
  border-radius: 6px;
  font-size: 12px;
  border: 1px solid var(--border);
  cursor: pointer; opacity: 0.8;
}

.divider {
  margin: 12px 0 16px 0;
  height: 1px;
  background: rgba(0,0,0,0.12);
}

/* PROMPT */
.prompt-box {
  background: var(--surface);
  padding: 14px 18px;
  border: 1px solid var(--border);
  border-radius: 6px;
  margin-bottom: 14px;
}
.prompt-text { font-size: 15px; }

/* FEEL */
.feel-label {
  font-size: 12px;
  opacity: 0.7;
  margin-bottom: 6px;
}

/* TEXTAREA */
textarea {
  width: 100%;
  height: 110px;
  padding: 14px 16px;
  background: #FBF8F6;
  border-radius: 6px;
  border: 1px solid var(--border);
  resize: none;
  box-shadow: inset 0 1px 4px rgba(0,0,0,0.06);
  box-sizing: border-box;
}

/* MOOD */
.mood-row {
  display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px;
}
.mood {
  padding: 6px 14px;
  border-radius: 6px;
  background: var(--chip-bg);
  border: 1px solid var(--border);
  font-size: 12px;
  cursor: pointer;
}

/* BUTTONS */
.btn-row {
  display: flex; gap: 12px; margin-top: 16px;
}
.btn {
  flex: 1;
  text-align: center;
  padding: 12px 0;
  border-radius: 6px;
  background: var(--accent);
  color: white;
  font-size: 14px;
  cursor: pointer;
}
.btn.secondary { background: var(--accent-soft); }

/* FOOTER */
.footer-note { font-size: 12px; opacity: 0.7; margin-top: 10px; }
.footer-quote { font-size: 13px; opacity: 0.8; font-style: italic; margin-top: 4px; }

/* ⭐ ARCHIVES INSIDE THE CARD */
.archives-section {
  margin-top: 22px;
  padding-top: 16px;
  border-top: 1px solid rgba(0,0,0,0.12);
}

.archives-title {
  font-weight: 600;
  opacity: 0.75;
  cursor: pointer;
  font-size: 14px;
}

.archives-list {
  display: none;
  margin-top: 10px;
}

.archive-entry {
  margin-bottom: 14px;
  padding-bottom: 10px;
  border-bottom: 1px solid #e8dcd5;
}

.archive-date {
  font-size: 11px;
  opacity: 0.65;
  margin-bottom: 3px;
}

.archive-text {
  font-size: 13px;
  white-space: pre-wrap;
}
</style>
</head>

<body>

<div class="card">

  <div class="label">WELLNESS</div>

  <div class="header-top">
    <div class="title">Today’s Journaling</div>
    <div class="chip" onclick="shufflePrompt()">Shuffle prompt</div>
  </div>

  <div class="divider"></div>

  <div class="prompt-box">
    <div id="prompt" class="prompt-text">
      What is something small you're proud of today?
    </div>
  </div>

  <div class="feel-label">Today I feel…</div>

  <textarea id="entry" placeholder="Write your thoughts…"></textarea>

  <div class="mood-row">
    <div class="mood">aligned</div>
    <div class="mood">grateful</div>
    <div class="mood">reflective</div>
    <div class="mood">low energy</div>
    <div class="mood">overwhelmed</div>
    <div class="mood">calm</div>
    <div class="mood">motivated</div>
  </div>

  <div class="btn-row">
    <div class="btn" onclick="saveEntry()">Save entry</div>
    <div class="btn secondary" onclick="clearEntry()">Clear</div>
  </div>

  <div class="footer-note">✓ Auto-saves to this browser.</div>
  <div id="quote" class="footer-quote"></div>

  <!-- ⭐ NEW: ARCHIVES INSIDE THE CARD -->
  <div class="archives-section">
    <div id="archivesTitle" class="archives-title" onclick="toggleArchives()">
      ▸ Archives
    </div>
    <div id="archivesList" class="archives-list"></div>
  </div>

</div>

<script>
/* PROMPTS (40+) */
const prompts = [
  "What is something small you're proud of today?",
  "Where can you be gentler with yourself?",
  "What boundary would support you this week?",
  "What made you smile today?",
  "What is one thing you want to release right now?",
  "What is a reminder your future self would give you?",
  "What fear can you let go of today?",
  "How can you show up for yourself in a softer way?",
  "What is something you're grateful for in this moment?",
  "What inspired you recently?",
  "What made you feel grounded today?",
  "What is one thing you want to thank yourself for?",
  "What did you learn about yourself recently?",
  "What can you simplify in your life right now?",
  "What emotion is taking up the most space today?",
  "What is something you wish someone would tell you?",
  "What would bring you peace today?",
  "What are you craving more of in your life?",
  "What do you want tomorrow to feel like?",
  "What is a truth you’re learning to accept?",
  "What would the kindest version of you choose?",
  "What do you need to forgive yourself for?",
  "What are you proud of surviving?",
  "What would make today feel fulfilling?",
  "What is something you're looking forward to?",
  "How can you support your mental health this week?",
  "What is one thing you want to stop apologizing for?",
  "What’s something you want to create space for?",
  "What is taking up too much of your energy?",
  "What did your inner child need to hear today?",
  "What feels aligned for you right now?",
  "What part of you needs attention and care?",
  "What can you release to feel lighter?",
  "What’s one way you can honor yourself today?",
  "What is a tiny joy you want to embrace?",
  "What can you celebrate about yourself?",
  "What is something you want to change gently?",
  "What made you feel safe recently?",
  "What belief are you outgrowing?",
  "What are you learning to trust?"
];

/* SHUFFLE PROMPT */
function shufflePrompt() {
  document.getElementById("prompt").innerText =
    prompts[Math.floor(Math.random() * prompts.length)];
}

/* SAVE ENTRY */
const entryBox = document.getElementById("entry");
entryBox.value = localStorage.getItem("journalEntry") || "";

function saveEntry() {
  localStorage.setItem("journalEntry", entryBox.value);
}

/* ARCHIVE ON CLEAR (newest first) */
function archiveEntry() {
  const text = entryBox.value.trim();
  if (!text) return;

  const archives = JSON.parse(localStorage.getItem("journalArchives") || "[]");

  const timestamp = new Date().toLocaleString([], {
    year: "numeric",
    month: "short",
    day: "numeric",
    hour: "2-digit",
    minute: "2-digit"
  });

  archives.unshift({ date: timestamp, text });

  localStorage.setItem("journalArchives", JSON.stringify(archives));
}

function clearEntry() {
  archiveEntry();
  entryBox.value = "";
  localStorage.removeItem("journalEntry");
  renderArchives();
}

/* MOODS */
document.querySelectorAll(".mood").forEach(m => {
  m.addEventListener("click", () => {
    document.querySelectorAll(".mood").forEach(x => x.classList.remove("active"));
    m.classList.add("active");
    localStorage.setItem("journalMood", m.innerText);
  });
});

const savedMood = localStorage.getItem("journalMood");
if (savedMood) {
  document.querySelectorAll(".mood").forEach(m => {
    if (m.innerText === savedMood) m.classList.add("active");
  });
}

/* QUOTES */
const quotes = [
  "Every moment you pause is a moment you heal.",
  "Softness is strength.",
  "You are allowed to rest.",
  "Your pace is valid.",
  "Gentle progress is still progress.",
  "You are becoming someone beautiful.",
  "Your presence is enough.",
  "Healing is happening quietly.",
  "Your energy is sacred—protect it.",
  "You’re allowed to begin again.",
  "Let yourself move slowly.",
  "Your softness is not a flaw.",
  "You deserve tenderness.",
  "Peace begins within.",
  "You don’t need to rush.",
  "Your inner world matters.",
  "You’re doing better than you think.",
  "You deserve gentle days.",
  "Release perfection.",
  "Your heart deserves peace."
];

document.getElementById("quote").innerText =
  quotes[Math.floor(Math.random() * quotes.length)];

/* ARCHIVES (INSIDE CARD NOW) */
function renderArchives() {
  const listEl = document.getElementById("archivesList");
  const archives = JSON.parse(localStorage.getItem("journalArchives") || "[]");

  if (!archives.length) {
    listEl.innerHTML = "<div style='opacity:0.6;'>No archived entries yet.</div>";
    return;
  }

  listEl.innerHTML = archives
    .map(
      a => `
      <div class="archive-entry">
        <div class="archive-date">${a.date}</div>
        <div class="archive-text">${a.text}</div>
      </div>
    `
    )
    .join("");
}

function toggleArchives() {
  const list = document.getElementById("archivesList");
  const title = document.getElementById("archivesTitle");

  if (list.style.display === "block") {
    list.style.display = "none";
    title.innerHTML = "▸ Archives";
  } else {
    list.style.display = "block";
    title.innerHTML = "▾ Archives";
  }
}

renderArchives();
</script>

</body>
</html>
